version: v1.0
name: Release to GitHub
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004
blocks:
  - name: Release
    task:
      jobs:
        - name: Tag and release
          commands:
            - 'curl -sL https://git.io/autotag-install | sh --'
            - 'git push https://confluentinc:$GH_TOKEN@github.com/confluentinc/go-prompt.git v$(./bin/autotag)'
      secrets:
        - name: semantic-release-credentials-go-prompt
